<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        /* disables number spinner on numeric input */
        /* for Chrome, Safari, Edge, Opera */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        /* Firefox */
        input[type=number] {
            -moz-appearance: textfield;
        }
        
        .small-help {
            color: rgb(100, 100, 100);
            font-size: 14px;
            font-style: italic; 
        } 

        .topline {
            font-size: 16px; 
            font-weight: bold;
        }
    </style>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"
        integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="
        crossorigin="" />

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
        crossorigin="anonymous"></script>

    <!-- include Leaflet (map) library -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
        integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
        crossorigin=""></script>

    <!-- load the boundaries for all RCDs
    The file is hosted on Github Gist, but getting the content from https://statically.io/ -->
    <script
        src="https://cdn.statically.io/gist/jmkahn/6533a7e7eb4b2f3994881892dae9dae8/raw/1800f19f8b2a61a978d559e7df418f8feec69429/RCD_Boundaries.js"></script>

    <script type="text/javascript" src="functions.js"></script>

    <title>RCD Map Plugin Creator</title>
</head>

<body>

    <div class="jumbotron text-center">
        <h1>RCD Map Plug in</h1>
        <p>Add an interactive project map to your website</p>
    </div>

    <div class="container">
        <div class="page-header">
            <h1>Create a Project Map for your RCD </h1>
        </div>

        <div class="row">

            <div class="col-sm-5">
                <section id="Forms">
                    <h3>Enter your information on the left: </h3>
                    <form class="form-horizontal">
                        <p class='topline'>1. Add an RCD Boundary</p>
                        <label class="control-label" for="RCD_name">RCD Name </label>
                        <select class="form-control" id="RCD_name" required>
                            <option value="Alameda">Alameda</option>
                            <option value="Alpine">Alpine</option>
                            <option value="Amador">Amador</option>
                            <option value="Antelope Valley">Antelope Valley</option>
                            <option value="Bard">Bard</option>
                            <option value="Butte">Butte</option>
                            <option value="Cachuma">Cachuma</option>
                            <option value="Calaveras">Calaveras</option>
                            <option value="Coachella Valley">Coachella Valley</option>
                            <option value="Coarsegold">Coarsegold</option>
                            <option value="Coastal San Luis">Coastal San Luis</option>
                            <option value="Columbia">Columbia</option>
                            <option value="Colusa">Colusa</option>
                            <option value="Contra Costa">Contra Costa</option>
                            <option value="Del Norte">Del Norte</option>
                            <option value="Dixon">Dixon</option>
                            <option value="East Merced">East Merced</option>
                            <option value="East Stanislaus">East Stanislaus</option>
                            <option value="Eastern Kern">Eastern Kern</option>
                            <option value="El Dorado County">El Dorado County</option>
                            <option value="Excelesior-Kings River">Excelesior-Kings River</option>
                            <option value="Fall River">Fall River</option>
                            <option value="Feather River">Feather River</option>
                            <option value="Firebaugh">Firebaugh</option>
                            <option value="Florin">Florin</option>
                            <option value="Georgetown Divide">Georgetown Divide</option>
                            <option value="Glenn">Glenn</option>
                            <option value="Gold Ridge">Gold Ridge</option>
                            <option value="Goose Lake">Goose Lake</option>
                            <option value="Grassland">Grassland</option>
                            <option value="Greater San Diego">Greater San Diego</option>
                            <option value="Guadalupe-Coyote">Guadalupe-Coyote</option>
                            <option value="Gustine-Romero">Gustine-Romero</option>
                            <option value="Honey Lake">Honey Lake</option>
                            <option value="Humboldt">Humboldt</option>
                            <option value="Imperial Irrigation Dst">Imperial Irrigation District</option>
                            <option value="Inland Empire">Inland Empire</option>
                            <option value="Inyo-Mono">Inyo-Mono</option>
                            <option value="James">James</option>
                            <option value="Kern Valley">Kern Valley</option>
                            <option value="Lake County">Lake County</option>
                            <option value="Lava Beds-Butte Valley">Lava Beds-Butte Valley</option>
                            <option value="Loma Prieta">Loma Prieta</option>
                            <option value="Los Banos">Los Banos</option>
                            <option value="Lower Consumnes">Lower Consumnes</option>
                            <option value="Madera Chowchilla">Madera Chowchilla</option>
                            <option value="Marin">Marin</option>
                            <option value="Mariposa">Mariposa</option>
                            <option value="Mendocino">Mendocino</option>
                            <option value="Mission">Mission</option>
                            <option value="Modoc">Modoc</option>
                            <option value="Mojave Desert">Mojave Desert</option>
                            <option value="Mono">Mono</option>
                            <option value="Monterey">Monterey</option>
                            <option value="Napa">Napa</option>
                            <option value="Nevada County">Nevada County</option>
                            <option value="North West Kern">North West Kern</option>
                            <option value="Palo Verde">Palo Verde</option>
                            <option value="Panoche">Panoche</option>
                            <option value="Pit">Pit</option>
                            <option value="Placer">Placer</option>
                            <option value="Riverside-Corona">Riverside-Corona</option>
                            <option value="San Benito">San Benito</option>
                            <option value="San Jacinto Basin">San Jacinto Basin</option>
                            <option value="San Joaquin">San Joaquin</option>
                            <option value="San Luis">San Luis</option>
                            <option value="San Mateo">San Mateo</option>
                            <option value="Santa Cruz">Santa Cruz</option>
                            <option value="Santa Monica Mountains">Santa Monica Mountains</option>
                            <option value="Shasta Valley">Shasta Valley</option>
                            <option value="Sierra">Sierra</option>
                            <option value="Sierra Valley">Sierra Valley</option>
                            <option value="Siskiyou">Siskiyou</option>
                            <option value="Sloughhouse">Sloughhouse</option>
                            <option value="Solono">Solano</option>
                            <option value="Sonoma">Sonoma</option>
                            <option value="Suisun">Suisun</option>
                            <option value="Sutter">Sutter</option>
                            <option value="Tahoe">Tahoe</option>
                            <option value="Tehachapi">Tehachapi</option>
                            <option value="Tehama">Tehama</option>
                            <option value="Tem_Elsinore-Murrieta-Anza">Temecula-Elsinore-Murrieta-Anza</option>
                            <option value="Tranquility">Tranquility</option>
                            <option value="Trinity">Trinity</option>
                            <option value="Tulare">Tulare</option>
                            <option value="Tulare Lake">Tulare Lake</option>
                            <option value="Tuolumne">Tuolumne</option>
                            <option value="Upper Salinas-Las Tablas">Upper Salinas-Las Tablas</option>
                            <option value="Upper San Luis Rey">Upper San Luis Rey</option>
                            <option value="Ventura">Ventura</option>
                            <option value="West Stanislaus">West Stanislaus</option>
                            <option value="Western Shasta">Western Shasta</option>
                            <option value="Westside">Westside</option>
                            <option value="Yolo">Yolo</option>
                            <option value="Yuba">Yuba</option>
                        </select><br />

                        <label class="control-label" for="boundary_color">Optional: Change the color of the RCD Boundary</label> 
                        <input type="color" class="form-control form-control-color" id="boundary_color" name="boundary_color" value="#445cf3"><br /> 
                        
                        
                        <p class='topline'>2. Add project data </p>
                        <label for="organization_id" class="control-label"> RCD's Organization ID </label>
                        <input type="number" class="form-control" id="organization_id" name="organization_id"
                            placeholder="62">

                        <!-- <button type="button" id="get_project_data" class="btn btn-primary btn-sm">Show Project Data</button><br> -->
                        <p class="small-help"> Find the Organization ID by selecting <a
                            href=https://www.rcdprojects.org/ProjectStewardOrganization/Index target="_blank">your RCD in the Project
                            Tracker</a> and finding the string of numbers at the end of the URL. <br> Example (click to enlarge): 
                            <a href="https://raw.githubusercontent.com/jmkahn/RCD_map_plugins/main/img/exOrgIDmarkedupcropped.png" target="_blank">
                                <img alt='help image for finding Organizatin ID' class='img-fluid' src='https://raw.githubusercontent.com/jmkahn/RCD_map_plugins/main/img/exOrgIDmarkedupcropped.png' />
                            </a> If your RCD is not currently part of the Project Tracker, please request for your RCD to be added to the Project Tracker before creating a map here.</p>
                    </form>
                </section>

            </div>
            <div class="col-sm-5">
                <h3>Preview the results on the right: </h3>
                <div id="RCD_map" style="width: 600px; height: 400px;">
                    <script>render_basemap();</script>
                </div>
                Note: some project locations are obscured to protect landowner privacy. Click the popups to view data for specific projects.<br><br>
                <h3> When the map looks correct, select "print code"</h3>
                <button type="button" class="btn btn-success" id="print_code_button">Print Code</button>
            </div>
        </div>
    </div>

    <script>
        //when an RCD is selected from drop down, show that RCD on the map preview
        document.querySelector('#RCD_name').addEventListener("change", function () {
            let color = document.getElementById("boundary_color").value;

            update_RCD_boundaries(this.value, color);
        });

        // change RCD Boundary color from input
        document.querySelector('#boundary_color').addEventListener("change", function () {
            if (typeof current_boundary !== 'undefined') {
                set_boundary_color(this.value);
            }
        });

        document.querySelector('#organization_id').addEventListener("input", function () {
            let org_id = document.getElementById("organization_id").value;
            render_project_data(org_id);
        });

        document.querySelector('#print_code_button').addEventListener("click", function () {
            print_map_code(RCD_name, org_id, boundary_color); 
        }); 

    </script>
</body>

</html>
